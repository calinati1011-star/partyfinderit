<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TeamSyncer — Gaming</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="icon" href="logo.png" type="image/png">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            display: ['Orbitron', 'sans-serif'],
            body: ['Inter', 'sans-serif'],
          },
          colors: {
            steamBg: '#0b0d12',
            panel: '#0f1220',
            panelSoft: '#141826',
            neonCyan: '#00e5ff',
            neonMagenta: '#ff00d0',
            neonGreen: '#00ff9f',
            accent: '#1f2937',
            glass: 'rgba(255,255,255,0.04)'
          },
          boxShadow: {
            'glow-cyan': '0 6px 30px rgba(0,229,255,0.06), 0 0 12px rgba(0,229,255,0.08)',
            'glow-mag': '0 6px 30px rgba(255,0,208,0.04)'
          }
        }
      }
    }
  </script>
  <style>
    :root { color-scheme: dark; }
    html,body { height:100%; }
    body {
      margin:0;
      font-family:Inter, sans-serif;
      background: radial-gradient(1200px 600px at 10% 20%, rgba(0,229,255,0.04), transparent 6%),
                  radial-gradient(900px 400px at 90% 80%, rgba(255,0,208,0.03), transparent 8%),
                  linear-gradient(180deg, #05060a 0%, #0b0d12 40%, #06070b 100%);
      color: #e6eef8;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
    }
    #steam-lines {
      position: fixed; inset: 0; pointer-events: none; z-index:0;
      background-image: repeating-linear-gradient(90deg, rgba(255,255,255,0.01) 0 1px, transparent 1px 30px);
      opacity: 0.06;
      animation: drift 18s linear infinite;
      transform: translate3d(0,0,0);
    }
    @keyframes drift { from { background-position: 0 0; } to { background-position: 1000px 0; } }
    #vignette {
      position: fixed; inset:0; z-index:0; pointer-events:none;
      background: radial-gradient(60% 40% at 10% 10%, rgba(0,0,0,0.0), rgba(0,0,0,0.55) 60%);
      mix-blend-mode: multiply;
    }
    .neon-title { text-shadow: 0 0 8px rgba(0,229,255,0.12), 0 0 24px rgba(0,229,255,0.06); }
    ::-webkit-scrollbar { width:10px; height:10px; }
    ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.06); border-radius:8px; border: 2px solid transparent; background-clip: padding-box; }
    ::-webkit-scrollbar-track { background: transparent; }
    .msg-bubble { word-break:break-word; }
    .btn-pulse { animation: pulse 2.8s infinite; }
    @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(0,229,255,0.00); } 70% { box-shadow: 0 0 30px 6px rgba(0,229,255,0.02); } 100% { box-shadow: 0 0 0 0 rgba(0,229,255,0.00); } }
    .glass-border { border: 1px solid rgba(255,255,255,0.04); backdrop-filter: blur(6px); }
  </style>
</head>
<body class="min-h-screen flex items-start justify-center p-4 relative">

  <div id="steam-lines" aria-hidden="true"></div>
  <div id="vignette" aria-hidden="true"></div>

  <div class="w-full max-w-7xl relative z-20 grid grid-cols-1 lg:grid-cols-4 gap-6">
    <aside class="lg:col-span-1 bg-panel rounded-2xl glass-border p-4 flex flex-col gap-4 shadow-glow-cyan">
      <div class="flex items-center gap-3">
        <img src="logo.png" alt="logo" class="w-12 h-12 rounded-md ring-1 ring-white/5">
        <div>
          <h1 class="text-xl font-display neon-title">TeamSyncer</h1>
          <p class="text-xs text-slate-400">Lobby ITA</p>
        </div>
      </div>
      <div class="mt-2">
        <label for="search" class="text-xs text-slate-400">Cerca gioco</label>
        <div class="relative mt-2">
          <input id="search" type="text" placeholder="Es. GTA V, FC25..." aria-label="Cerca gioco" class="w-full bg-panelSoft rounded-full px-4 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-neonCyan">
          <ul id="search-suggestions" class="absolute left-0 right-0 mt-2 bg-panel rounded-xl hidden max-h-56 overflow-auto p-1 space-y-1 z-40"></ul>
        </div>
      </div>
      <div>
        <h3 class="text-sm text-slate-300 mb-2">Giochi principali</h3>
        <ul id="game-list" class="space-y-2 max-h-56 overflow-auto pr-2"></ul>
      </div>
      <div class="mt-auto">
        <button id="create-lobby-global" class="w-full bg-gradient-to-r from-neonCyan to-neonMagenta text-black py-2 rounded-xl font-semibold btn-pulse shadow-glow-cyan">+ Crea Lobby</button>
        <p class="text-xs text-slate-500 mt-2">Lobby pubbliche • 1-8 giocatori</p>
      </div>
    </aside>

    <main class="lg:col-span-3 grid grid-rows-[auto_1fr_auto] gap-4">
      <div class="bg-panel rounded-2xl glass-border p-4 flex items-center justify-between shadow-glow-cyan">
        <div>
          <h2 id="room-title" class="text-lg font-semibold neon-title truncate">Nessuna stanza</h2>
          <div id="user-count" class="text-xs text-slate-400"></div>
        </div>
        <div class="flex items-center gap-3">
          <div id="player-list" class="flex items-center gap-2"></div>
          <button id="leave-lobby" class="hidden px-3 py-1 rounded-full bg-red-700 hover:bg-red-600 text-white text-sm">Esci</button>
        </div>
      </div>

      <section class="bg-panel rounded-2xl glass-border p-4 flex flex-col gap-3 overflow-hidden">
        <div id="messages" class="flex-1 overflow-auto space-y-3 p-1"></div>
      </section>

      <form id="send-form" class="bg-panel rounded-2xl glass-border p-3 flex items-center gap-3">
        <input id="msg" type="text" placeholder="Scrivi un messaggio..." aria-label="Messaggio" class="flex-1 bg-transparent border border-transparent outline-none px-4 py-2 rounded-full text-sm placeholder:text-slate-500" disabled>
        <button type="submit" id="send-btn" class="px-4 py-2 rounded-full bg-neonCyan text-black font-semibold disabled:opacity-50" disabled>Invia</button>
      </form>
    </main>
  </div>

  <div id="lobby-modal" class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center p-4">
    <div class="w-full max-w-md bg-panelSoft rounded-2xl glass-border p-6 shadow-glow-mag">
      <h3 class="text-xl font-display mb-1 neon-title">Crea una Lobby</h3>
      <p class="text-sm text-slate-400 mb-4">Scegli il gioco e il numero massimo di giocatori (1-8)</p>
      <div class="space-y-3">
        <div>
          <label class="text-xs text-slate-400">Gioco</label>
          <input id="lobby-game" type="text" readonly class="w-full bg-transparent px-3 py-2 rounded-md border border-slate-700 text-sm" />
        </div>
        <div>
          <label class="text-xs text-slate-400">Max giocatori</label>
          <input id="max-players" type="number" min="1" max="8" value="4" class="w-full bg-transparent px-3 py-2 rounded-md border border-slate-700 text-sm" />
        </div>
      </div>
      <div class="flex justify-end gap-3 mt-4">
        <button id="cancel-lobby" class="px-4 py-2 rounded-full bg-slate-700 hover:bg-slate-600">Annulla</button>
        <button id="confirm-lobby" class="px-4 py-2 rounded-full bg-neonMagenta text-black font-semibold">Crea</button>
      </div>
    </div>
  </div>

  <div id="profile-modal" class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center p-4">
    <div class="w-full max-w-xs bg-panelSoft rounded-2xl glass-border p-5">
      <h3 id="profile-nickname" class="text-lg font-display neon-title"></h3>
      <p id="profile-lobbies" class="text-sm text-slate-400"></p>
      <p id="profile-messages" class="text-sm text-slate-400"></p>
      <div class="flex justify-end mt-4">
        <button id="close-profile" class="px-4 py-2 rounded-full bg-slate-700 hover:bg-slate-600">Chiudi</button>
      </div>
    </div>
  </div>

  <audio id="sound-message" src="message.mp3" preload="auto"></audio>
  <audio id="sound-join" src="join.mp3" preload="auto"></audio>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/app.js" defer></script>
</body>
</html>

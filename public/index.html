<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PartyFinder</title>
<link rel="icon" href="favicon.png" type="image/png">
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config={
  theme:{
    extend:{
      colors:{
        neonBlue:'#FFD700',
        neonPink:'#FF00FF',
        darkBg:'#0f111a',
        panelBg:'#1a1c2c',
        panelHover:'#222540'
      },
      keyframes:{
        scaleIn:{'0%':{transform:'scale(0.8)',opacity:'0'},'100%':{transform:'scale(1)',opacity:'1'}},
        dots:{'0%,20%':{content:'""'},'40%':{content:'"."'},'60%':{content:'".."'},'80%,100%':{content:'"...'}}
      },
      animation:{
        scaleIn:'scaleIn 0.2s ease-out',
        dots:'dots 1s infinite steps(4,end)'
      }
    }
  }
}
</script>
<style>
body{background:#0f111a;font-family:'Arial',sans-serif;overflow-x:hidden;margin:0;}
#logo-bg{background-image:url('logobackground.png');background-repeat:repeat;background-size:200px 200px;filter:blur(5px) brightness(0.2);position:absolute;top:0;left:0;width:100%;height:100%;animation:moveBg 30s linear infinite;z-index:0;}
@keyframes moveBg{0%{background-position:0 0;}50%{background-position:500px 500px;}100%{background-position:0 0;}}
.confetti{position:absolute;width:6px;height:6px;border-radius:50%;animation:confettiFall 1s linear forwards;}
@keyframes confettiFall{0%{transform:translateY(-50px) rotate(0deg);opacity:1;}100%{transform:translateY(200px) rotate(360deg);opacity:0;}}
.typing-dots::after{content:"";animation:dots 1s infinite steps(4,end);}
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-thumb{background:#FFD700;border-radius:3px}
::-webkit-scrollbar-track{background:#111}
#italian-flag{position:fixed;top:1rem;right:1rem;width:40px;height:auto;z-index:50;}
</style>
</head>
<body class="text-white min-h-screen flex justify-center items-start p-4 relative overflow-hidden">

<img id="italian-flag" src="https://upload.wikimedia.org/wikipedia/commons/0/03/Flag_of_Italy.svg" alt="Italian Flag">
<div id="logo-bg"></div>

<div class="w-full max-w-5xl flex flex-col gap-6 relative z-10">
  <header class="flex flex-col md:flex-row md:items-center justify-between gap-4 text-center md:text-left">
    <h1 class="text-3xl sm:text-5xl font-extrabold neonPink">PartyFinder</h1>
    <div class="flex gap-2 justify-center md:justify-end w-full md:w-auto">
      <input id="nickname" type="text" placeholder="Nickname" class="flex-1 px-4 py-2 rounded-full bg-panelBg border border-neonBlue outline-none text-white placeholder:text-slate-400">
      <button id="set-nickname" class="px-4 py-2 rounded-full bg-neonBlue text-darkBg font-semibold hover:bg-neonPink transition">Ok</button>
    </div>
  </header>

  <main class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6">
    <section class="md:col-span-1">
      <div class="bg-panelBg rounded-3xl shadow-lg p-4 md:p-5 flex flex-col gap-3">
        <h2 class="text-xl md:text-2xl font-semibold neonBlue">Scegli un gioco</h2>
        <input id="search" type="text" placeholder="Cerca gioco..." class="w-full px-4 py-2 rounded-full bg-darkBg border border-neonBlue outline-none text-white placeholder:text-slate-400 relative z-10">
        <ul id="search-suggestions" class="absolute bg-panelBg rounded-xl mt-1 w-full z-20 max-h-60 overflow-auto hidden"></ul>
        <ul id="game-list" class="space-y-2 mt-2"></ul>
        <div id="lobby-list" class="mt-3 space-y-2 hidden"></div>
      </div>
    </section>

    <section class="md:col-span-2">
      <div class="bg-panelBg rounded-3xl shadow-lg p-4 md:p-5 flex flex-col h-[60vh] md:h-[70vh]">
        <div class="flex items-center justify-between mb-2 md:mb-3">
          <h2 id="room-title" class="text-xl md:text-2xl font-semibold neonBlue">Nessuna stanza</h2>
          <div id="user-count" class="text-sm text-slate-400"></div>
        </div>
        <div id="player-list" class="flex flex-wrap gap-2 mb-2"></div>
        <div id="messages" class="flex-1 overflow-auto bg-darkBg rounded-2xl p-2 md:p-3 space-y-2 mb-2"></div>
        <form id="send-form" class="mt-2 flex gap-2">
          <input id="msg" type="text" placeholder="Scrivi un messaggio..." class="flex-1 px-3 py-2 rounded-full bg-darkBg border border-neonBlue outline-none disabled:opacity-50" disabled>
          <button class="px-4 py-2 rounded-full bg-neonBlue hover:bg-neonPink text-darkBg disabled:opacity-50 font-semibold" disabled>Invia</button>
        </form>
      </div>
    </section>
  </main>
</div>

<div id="lobby-modal" class="fixed inset-0 bg-black/70 hidden z-50 flex items-center justify-center">
  <div class="bg-panelBg rounded-3xl p-4 md:p-6 w-11/12 md:w-96 animate-scaleIn flex flex-col gap-3">
    <h3 class="text-lg md:text-xl font-semibold neonBlue">Crea una Lobby</h3>
    <p class="text-sm text-slate-400">Scegli il numero di giocatori (1-8)</p>
    <input id="max-players" type="number" min="1" max="8" value="4" class="w-full px-4 py-2 rounded-full bg-darkBg border border-neonBlue text-white outline-none text-center">
    <button id="private-toggle-btn" class="flex items-center justify-center gap-2 px-4 py-2 rounded-full bg-slate-700 hover:bg-slate-600 transition">
      <span id="private-icon">ðŸ”“</span> 
      <span id="private-label">Lobby pubblica</span>
    </button>
    <div class="flex justify-end gap-3">
      <button id="cancel-lobby" class="px-4 py-2 rounded-full bg-slate-700 hover:bg-slate-600">Annulla</button>
      <button id="confirm-lobby" class="px-4 py-2 rounded-full bg-neonBlue hover:bg-neonPink text-darkBg font-semibold">Crea</button>
    </div>
  </div>
</div>

<div id="nickname-toast" class="fixed inset-0 flex items-center justify-center pointer-events-none">
  <div class="bg-neonBlue text-darkBg px-6 py-3 rounded-2xl text-lg opacity-0 transform scale-90 transition-all">Nome cambiato!</div>
</div>

<div id="profile-modal" class="fixed inset-0 bg-black/70 hidden z-50 flex items-center justify-center">
  <div class="bg-panelBg rounded-3xl p-4 md:p-6 w-11/12 md:w-80 animate-scaleIn flex flex-col gap-3">
    <h3 class="text-lg md:text-xl font-semibold neonBlue" id="profile-nickname"></h3>
    <p class="text-sm text-slate-400" id="profile-lobbies"></p>
    <p class="text-sm text-slate-400" id="profile-messages"></p>
    <div class="flex justify-end">
      <button id="close-profile" class="px-4 py-2 rounded-full bg-slate-700 hover:bg-slate-600">Chiudi</button>
    </div>
  </div>
</div>

<audio id="sound-message" src="message.mp3" preload="auto"></audio>
<audio id="sound-join" src="join.mp3" preload="auto"></audio>

<script src="/socket.io/socket.io.js"></script>
<script src="/app.js"></script>
</body>
</html>
